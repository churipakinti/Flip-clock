<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fin del mundo</title>
  <link rel="icon" type="image/png" href="favicon.png" />
  <link href="https://fonts.googleapis.com/css2?family=Gloria+Hallelujah&display=swap" rel="stylesheet">


  <style>
    :root{
      --u: clamp(44px, min(12vmin, 10vw), 120px);
      --fg:#eaf0ff;
      --accent:#FFFFFF;
    }
    *{ box-sizing:border-box; margin:0; padding:0; }

    /* Layout: título arriba, reloj+footer abajo */
    body{
      min-height:100vh;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      align-items:center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color: var(--fg);
      text-align: center;
      overflow:hidden;
      background-color: #000;
    }

    /* ===== Video de fondo ===== */
    #bg-video {
      position: fixed;
      top: 44%;
      left: 50%;
      width:100%;
      height:100%;
      object-fit: cover;
      object-position: center;
      z-index: -2;
      filter: invert(1);
      transform: translate(-50%, -50%) scale(0.75);
    }

    /* Overlay oscuro para contraste */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      z-index: -1;
    }

    /* ===== Título fijo ===== */
    .title {
     font-family: 'Gloria Hallelujah', cursive; /* estilo manuscrito */
     font-size: clamp(32px, 7vmin, 80px);
     color: #ddd;
     text-transform: uppercase;
     letter-spacing: .05em;
     /* Sombras múltiples difusas simulando polvo de tiza */
     text-shadow:
     1px 1px 2px rgba(255,255,255,0.6),
    -1px -1px 2px rgba(255,255,255,0.5),
     2px -2px 3px rgba(255,255,255,0.4),
    -2px  2px 3px rgba(255,255,255,0.4),
     0 0 6px rgba(255,255,255,0.3);
}


    /* Contenedor inferior (reloj + footer) */
    .bottom-wrap{
      display:flex;
      flex-direction:column;
      align-items:center;
      margin-bottom: 2rem; /* ajusta distancia al borde inferior */
      gap: .75rem;
    }

    /* ===== Reloj ===== */
    .clock{
      display:flex; align-items:center; justify-content:center; flex-wrap:wrap;
      gap: calc(var(--u)*.25);
      padding: calc(var(--u)*.2);
    }
    .group{ display:flex; gap: calc(var(--u)*.15); }
    .sep{ font-weight:700; opacity:.75; margin:0 .3rem;
          font-size: calc(var(--u)*.45); }

    .digit{
      position:relative;
      width:  calc(var(--u)*1);
      height: calc(var(--u)*1.5);
      perspective: 1200px;
    }
    .card{
      position:absolute; inset:0; overflow:hidden;
      background: #333;
      border-radius: calc(var(--u)*.18);
      box-shadow: 0 calc(var(--u)*.12) calc(var(--u)*.3) rgba(0,0,0,.5),
                  inset 0 -2px 0 rgba(255,255,255,.01);
      display:grid; grid-template-rows:1fr 1fr;
    }
    .card::after{
      content:""; position:absolute; left:0; right:0; top:50%;
      transform:translateY(-50%);
      height: 3px;
      background: linear-gradient(to bottom, rgba(255,255,255,.10), rgba(0,0,0,.45));
      pointer-events:none;
    }
    .top, .bottom, .flip-front, .flip-back{
      display:grid; place-items:center; font-weight:800; letter-spacing:.01em;
      font-size: calc(var(--u)*1);
    }
    .top, .flip-front { border-bottom: 1px solid rgba(255,255,255,.08); background:#444; }
    .bottom, .flip-back{ border-top: 1px solid rgba(0,0,0,.35); background:#222; }

    .flipper{ position:absolute; inset:0; pointer-events:none; perspective:1000px; }
    .flip-front, .flip-back{
      position:absolute; left:0; right:0; height:50%;
      backface-visibility:hidden; transform-origin:center bottom;
    }
    .flip-front{ top:0; border-radius: calc(var(--u)*.18) calc(var(--u)*.18) 0 0; }
    .flip-back { bottom:0; transform-origin:center top;
                 border-radius: 0 0 calc(var(--u)*.18) calc(var(--u)*.18); }
    .animate .flip-front{ animation: flipFront 420ms cubic-bezier(.19,.64,.34,1.17); }
    .animate .flip-back { animation: flipBack 420ms cubic-bezier(.19,.64,.34,1.17); }
    @keyframes flipFront{ 0%{transform:rotateX(0)} 100%{transform:rotateX(-90deg)} }
    @keyframes flipBack { 0%{transform:rotateX(90deg)} 100%{transform:rotateX(0)} }

    .stack{ display:grid; justify-items:center; }
    .label{
      margin-top: calc(var(--u)*.12);
      font-family: 'Gloria Hallelujah', cursive;
      font-weight:600; opacity:.7;
      font-size: calc(var(--u)*.32);
    }

    /* ===== Footer dinámico ===== */
    .footer{
      font-weight:700;
      color: #FFFFFF;
      font-family: 'Gloria Hallelujah', cursive;
      font-size: clamp(12px, 3vmin, 12px);
      animation: blink 0s infinite;
      letter-spacing:.05em;
    }
    @keyframes blink { 0%,100%{opacity:1} 50%{opacity:.4} }
  </style>
</head>
<body>
  <!-- Video de fondo -->
  <video autoplay muted loop playsinline id="bg-video">
    <source src="apocalipsis.mp4" type="video/mp4">
  </video>
  <div class="overlay"></div>

  <!-- Título -->
  <div class="title">Fin del mundo</div>

  <!-- Contenedor inferior (reloj + footer) -->
  <div class="bottom-wrap">
    <!-- Reloj (ÚNICO clock con ID único) -->
    <div class="clock" id="clock">
      <div class="stack">
        <div class="group" data-label="HOURS">
          <div class="digit" data-value="0"></div>
          <div class="digit" data-value="0"></div>
        </div>
        <div class="label">horas</div>
      </div>
      <div class="sep">:</div>
      <div class="stack">
        <div class="group" data-label="MINUTES">
          <div class="digit" data-value="0"></div>
          <div class="digit" data-value="0"></div>
        </div>
        <div class="label">minutos</div>
      </div>
      <div class="sep">:</div>
      <div class="stack">
        <div class="group" data-label="SECONDS">
          <div class="digit" data-value="0"></div>
          <div class="digit" data-value="0"></div>
        </div>
        <div class="label">segundos</div>
      </div>
    </div>

    <!-- Footer (ÚNICO footer con ID único) -->
    <div id="footer" class="footer">Calculando…</div>
  </div>

<script>
  const APOCALYPSE_AT = new Date("2030-01-01T00:00:00");

  function buildCard(value){
    const card = document.createElement('div');
    card.className = 'card';
    const top = document.createElement('div'); top.className = 'top'; top.textContent = value;
    const bottom = document.createElement('div'); bottom.className = 'bottom'; bottom.textContent = value;
    card.append(top, bottom);
    return card;
  }
  function flipTo(digitEl, newValue){
    const oldValue = digitEl.getAttribute('data-value');
    if (String(oldValue) === String(newValue)) return;
    digitEl.innerHTML = '';
    digitEl.appendChild(buildCard(oldValue));
    const flipper = document.createElement('div');
    flipper.className = 'flipper animate';
    const front = document.createElement('div'); front.className = 'flip-front'; front.textContent = oldValue;
    const back  = document.createElement('div'); back.className  = 'flip-back';  back.textContent  = newValue;
    flipper.append(front, back);
    digitEl.appendChild(flipper);
    flipper.addEventListener('animationend', () => {
      digitEl.innerHTML = '';
      digitEl.appendChild(buildCard(newValue));
      digitEl.setAttribute('data-value', newValue);
    }, { once:true });
  }
  document.querySelectorAll('.digit').forEach(d => d.appendChild(buildCard('0')));
  const pad2 = n => n < 10 ? '0'+n : ''+n;

  function tick(){
    const now = new Date();
    const sets = [pad2(now.getHours()), pad2(now.getMinutes()), pad2(now.getSeconds())];
    document.querySelectorAll('.group').forEach((g, i) => {
      const digits = g.querySelectorAll('.digit');
      flipTo(digits[0], sets[i][0]);
      flipTo(digits[1], sets[i][1]);
    });
  }

  function updateFooter(){
    const now = new Date();
    const diff = APOCALYPSE_AT - now;
    const footer = document.getElementById("footer");
    if (diff <= 0){
      footer.textContent = "El fin ha llegado.";
      return;
    }
    const days  = Math.floor(diff / (1000*60*60*24));
    const hours = Math.floor((diff / (1000*60*60)) % 24);
    const mins  = Math.floor((diff / (1000*60)) % 60);
    const dTxt = days === 1 ? "día" : "días";
    const hTxt = hours === 1 ? "hora" : "horas";
    const mTxt = mins === 1 ? "minuto" : "minutos";
    footer.textContent = `Faltan ${days} ${dTxt}, ${hours} ${hTxt} y ${mins} ${mTxt}…`;
  }

  tick(); updateFooter();
  setInterval(tick, 1000);
  setInterval(updateFooter, 30_000);
</script>
</body>
</html>
