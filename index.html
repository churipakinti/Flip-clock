<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Reloj para el fin del mundo</title>
  <link rel="icon" type="image/png" href="favicon.png" />

  <style>
    :root{
      --u: clamp(44px, min(12vmin, 10vw), 120px);
      --fg:#eaf0ff;
      --accent:#FFFFFF;
    }
    *{ box-sizing:border-box; margin:0; padding:0; }
    body{
      min-height:100vh;
      display:grid;
      place-items:center;
      gap: calc(var(--u)*.35);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color: var(--fg);
      text-align: center;
      overflow:hidden;
    }

    /* ===== Video de fondo ===== */
    #bg-video {
      position: fixed;
      right: 1;
      bottom: 1;
      min-width: 100%;
      min-height: 100%;
      object-fit: cover;
      object-position: center;  /* centra el recorte */
      z-index: -2;
      filter: invert(1); /* ðŸ‘ˆ filtro para invertir colores */
    }

    /* Overlay oscuro para contraste */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      z-index: -1;
    }

    /* ===== TÃ­tulo fijo ===== */
    .title{
      font-weight:900;
      text-transform:uppercase;
      letter-spacing:.08em;
      color: var(--accent);
      text-shadow: 0 0 6px rgba(255,0,0,0.6), 0 0 12px rgba(255,0,0,0.4);
      font-size: clamp(28px, 6vmin, 70px);
      line-height:1.1;
    }

    /* ===== Reloj ===== */
    .clock{
      display:flex; align-items:center; justify-content:center; flex-wrap:wrap;
      gap: calc(var(--u)*.25);
      padding: calc(var(--u)*.2);
    }
    .group{ display:flex; gap: calc(var(--u)*.15); }
    .sep{ font-weight:700; opacity:.75; margin:0 .3rem;
          font-size: calc(var(--u)*.45); }

    .digit{
      position:relative;
      width:  calc(var(--u)*1.6);
      height: calc(var(--u)*2.0);
      perspective: 1200px;
    }
    .card{
      position:absolute; inset:0; overflow:hidden;
      background: #1a1f2b;
      border-radius: calc(var(--u)*.18);
      box-shadow: 0 calc(var(--u)*.12) calc(var(--u)*.3) rgba(0,0,0,.5),
                  inset 0 -2px 0 rgba(255,255,255,.08);
      display:grid; grid-template-rows:1fr 1fr;
    }
    .card::after{
      content:""; position:absolute; left:0; right:0; top:50%;
      transform:translateY(-50%);
      height: 3px;
      background: linear-gradient(to bottom, rgba(255,255,255,.10), rgba(0,0,0,.45));
      pointer-events:none;
    }
    .top, .bottom, .flip-front, .flip-back{
      display:grid; place-items:center; font-weight:800; letter-spacing:.01em;
      font-size: calc(var(--u)*1.2);
    }
    .top, .flip-front { border-bottom: 1px solid rgba(255,255,255,.08); background:#2a3246; }
    .bottom, .flip-back{ border-top: 1px solid rgba(0,0,0,.35); background:#171c29; }

    .flipper{ position:absolute; inset:0; pointer-events:none; perspective:1000px; }
    .flip-front, .flip-back{
      position:absolute; left:0; right:0; height:50%;
      backface-visibility:hidden; transform-origin:center bottom;
    }
    .flip-front{ top:0; border-radius: calc(var(--u)*.18) calc(var(--u)*.18) 0 0; }
    .flip-back { bottom:0; transform-origin:center top;
                 border-radius: 0 0 calc(var(--u)*.18) calc(var(--u)*.18); }
    .animate .flip-front{ animation: flipFront 420ms cubic-bezier(.19,.64,.34,1.17); }
    .animate .flip-back { animation: flipBack 420ms cubic-bezier(.19,.64,.34,1.17); }
    @keyframes flipFront{ 0%{transform:rotateX(0)} 100%{transform:rotateX(-90deg)} }
    @keyframes flipBack { 0%{transform:rotateX(90deg)} 100%{transform:rotateX(0)} }

    .stack{ display:grid; justify-items:center; }
    .label{
      margin-top: calc(var(--u)*.12);
      font-weight:600; opacity:.7;
      font-size: calc(var(--u)*.32);
    }

    /* ===== Footer dinÃ¡mico ===== */
    .footer{
      font-weight:700;
      color: #FFFFFF;
      font-size: clamp(18px, 3vmin, 18px);
      animation: blink 0s infinite;
      letter-spacing:.05em;
    }
    @keyframes blink { 0%,100%{opacity:1} 50%{opacity:.4} }
  </style>
</head>
<body>
  <!-- Video de fondo -->
  <video autoplay muted loop playsinline id="bg-video">
    <source src="apocalipsis.mp4" type="video/mp4">
  </video>
  <div class="overlay"></div>

  <!-- TÃ­tulo -->
  <div class="title">Reloj para el fin del mundo</div>

  <!-- Reloj -->
  <div class="clock" id="clock">
    <div class="stack">
      <div class="group" data-label="HOURS">
        <div class="digit" data-value="0"></div>
        <div class="digit" data-value="0"></div>
      </div>
      <div class="label">HOURS</div>
    </div>
    <div class="sep">:</div>
    <div class="stack">
      <div class="group" data-label="MINUTES">
        <div class="digit" data-value="0"></div>
        <div class="digit" data-value="0"></div>
      </div>
      <div class="label">MINUTES</div>
    </div>
    <div class="sep">:</div>
    <div class="stack">
      <div class="group" data-label="SECONDS">
        <div class="digit" data-value="0"></div>
        <div class="digit" data-value="0"></div>
      </div>
      <div class="label">SECONDS</div>
    </div>
  </div>

  <!-- Footer -->
  <div id="footer" class="footer">Calculandoâ€¦</div>

<script>
  const APOCALYPSE_AT = new Date("2030-01-01T00:00:00");

  function buildCard(value){
    const card = document.createElement('div');
    card.className = 'card';
    const top = document.createElement('div'); top.className = 'top'; top.textContent = value;
    const bottom = document.createElement('div'); bottom.className = 'bottom'; bottom.textContent = value;
    card.append(top, bottom);
    return card;
  }
  function flipTo(digitEl, newValue){
    const oldValue = digitEl.getAttribute('data-value');
    if (String(oldValue) === String(newValue)) return;
    digitEl.innerHTML = '';
    digitEl.appendChild(buildCard(oldValue));
    const flipper = document.createElement('div');
    flipper.className = 'flipper animate';
    const front = document.createElement('div'); front.className = 'flip-front'; front.textContent = oldValue;
    const back  = document.createElement('div'); back.className  = 'flip-back';  back.textContent  = newValue;
    flipper.append(front, back);
    digitEl.appendChild(flipper);
    flipper.addEventListener('animationend', () => {
      digitEl.innerHTML = '';
      digitEl.appendChild(buildCard(newValue));
      digitEl.setAttribute('data-value', newValue);
    }, { once:true });
  }
  document.querySelectorAll('.digit').forEach(d => d.appendChild(buildCard('0')));
  const pad2 = n => n < 10 ? '0'+n : ''+n;

  function tick(){
    const now = new Date();
    const sets = [pad2(now.getHours()), pad2(now.getMinutes()), pad2(now.getSeconds())];
    document.querySelectorAll('.group').forEach((g, i) => {
      const digits = g.querySelectorAll('.digit');
      flipTo(digits[0], sets[i][0]);
      flipTo(digits[1], sets[i][1]);
    });
  }

  function updateFooter(){
    const now = new Date();
    const diff = APOCALYPSE_AT - now;
    const footer = document.getElementById("footer");
    if (diff <= 0){
      footer.textContent = "El fin ha llegado.";
      return;
    }
    const days  = Math.floor(diff / (1000*60*60*24));
    const hours = Math.floor((diff / (1000*60*60)) % 24);
    const mins  = Math.floor((diff / (1000*60)) % 60);
    const dTxt = days === 1 ? "dÃ­a" : "dÃ­as";
    const hTxt = hours === 1 ? "hora" : "horas";
    const mTxt = mins === 1 ? "minuto" : "minutos";
    footer.textContent = `Faltan ${days} ${dTxt}, ${hours} ${hTxt} y ${mins} ${mTxt}â€¦`;
  }

  tick(); updateFooter();
  setInterval(tick, 1000);
  setInterval(updateFooter, 30_000);
</script>
</body>
</html>
